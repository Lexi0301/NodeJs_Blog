{"remainingRequest":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_babel-loader@8.3.0@babel-loader\\lib\\index.js!F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js??ref--1-0!F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_vue-loader@15.10.1@vue-loader\\lib\\index.js??vue-loader-options!F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\src\\views\\modules\\chat\\list.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\src\\views\\modules\\chat\\list.vue","mtime":1684922232777},{"path":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\babel.config.js","mtime":1650957311000},{"path":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_babel-loader@8.3.0@babel-loader\\lib\\index.js","mtime":456789000000},{"path":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_cache-loader@4.1.0@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"F:\\nodejs608lq(1)\\nodejs608lq\\src\\views\\admin\\node_modules\\_vue-loader@15.10.1@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgQWRkT3JVcGRhdGUgZnJvbSAiLi9jaGF0LWFkZC1vci11cGRhdGUiOwppbXBvcnQgeyBzZXRJbnRlcnZhbCB9IGZyb20gJ3RpbWVycyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGF0YUxpc3Q6IFtdLAogICAgICBwYWdlSW5kZXg6IDEsCiAgICAgIHBhZ2VTaXplOiAxMCwKICAgICAgdG90YWxQYWdlOiAwLAogICAgICBkYXRhTGlzdExvYWRpbmc6IGZhbHNlLAogICAgICBzaG93RmxhZzogdHJ1ZSwKICAgICAgaW50ZXI6IG51bGwsCiAgICAgIGxheW91dHM6ICcnLAogICAgICBmbGFnOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgdGhhdCA9IHRoaXM7CiAgICB2YXIgaW50ZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgIHRoYXQuZ2V0RGF0YUxpc3QoKTsKICAgIH0sIDUwMDApOwogICAgdGhpcy5pbnRlciA9IGludGVyOwogICAgdGhpcy5jb250ZW50UGFnZVN0eWxlQ2hhbmdlKCk7CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBBZGRPclVwZGF0ZTogQWRkT3JVcGRhdGUKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOWIhumhtQogICAgY29udGVudFBhZ2VTdHlsZUNoYW5nZTogZnVuY3Rpb24gY29udGVudFBhZ2VTdHlsZUNoYW5nZSgpIHsKICAgICAgdmFyIGFyciA9IFtdOwogICAgICBhcnIucHVzaCgndG90YWwnKTsKICAgICAgYXJyLnB1c2goJ3NpemVzJyk7CiAgICAgIGFyci5wdXNoKCdwcmV2Jyk7CiAgICAgIGFyci5wdXNoKCdwYWdlcicpOwogICAgICBhcnIucHVzaCgnbmV4dCcpOwogICAgICBhcnIucHVzaCgnanVtcGVyJyk7CiAgICAgIHRoaXMubGF5b3V0cyA9IGFyci5qb2luKCk7CiAgICB9LAogICAgZ2V0RGF0YUxpc3Q6IGZ1bmN0aW9uIGdldERhdGFMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgdGFibGUgPSB0aGlzLiRzdG9yYWdlLmdldCgic2Vzc2lvblRhYmxlIik7CiAgICAgIHRoaXMuZmxhZyA9IHRhYmxlOwogICAgICB0aGlzLmRhdGFMaXN0TG9hZGluZyA9IHRydWU7CiAgICAgIHRoaXMuJGh0dHAoewogICAgICAgIHVybDogdGhpcy4kYXBpLmNoYXRwYWdlLAogICAgICAgIG1ldGhvZDogImdldCIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwYWdlOiB0aGlzLnBhZ2VJbmRleCwKICAgICAgICAgIGxpbWl0OiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgc29ydDogJ2lkJwogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBkYXRhID0gX3JlZi5kYXRhOwogICAgICAgIGlmIChkYXRhICYmIGRhdGEuY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMuZGF0YUxpc3QgPSBkYXRhLmRhdGEubGlzdDsKICAgICAgICAgIF90aGlzLnRvdGFsUGFnZSA9IGRhdGEuZGF0YS50b3RhbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuZGF0YUxpc3QgPSBbXTsKICAgICAgICAgIF90aGlzLnRvdGFsUGFnZSA9IDA7CiAgICAgICAgfQogICAgICAgIF90aGlzLmRhdGFMaXN0TG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmr4/pobXmlbAKICAgIHNpemVDaGFuZ2VIYW5kbGU6IGZ1bmN0aW9uIHNpemVDaGFuZ2VIYW5kbGUodmFsKSB7CiAgICAgIHRoaXMucGFnZVNpemUgPSB2YWw7CiAgICAgIHRoaXMucGFnZUluZGV4ID0gMTsKICAgICAgdGhpcy5nZXREYXRhTGlzdCgpOwogICAgfSwKICAgIC8vIOW9k+WJjemhtQogICAgY3VycmVudENoYW5nZUhhbmRsZTogZnVuY3Rpb24gY3VycmVudENoYW5nZUhhbmRsZSh2YWwpIHsKICAgICAgdGhpcy5wYWdlSW5kZXggPSB2YWw7CiAgICAgIHRoaXMuZ2V0RGF0YUxpc3QoKTsKICAgIH0sCiAgICAvLyDlm57lpI0KICAgIGFkZE9yVXBkYXRlSGFuZGxlcjogZnVuY3Rpb24gYWRkT3JVcGRhdGVIYW5kbGVyKHJvdykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdGhpcy5zaG93RmxhZyA9IGZhbHNlOwogICAgICB0aGlzLiRuZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRyZWZzLmFkZE9yVXBkYXRlLmluaXQocm93LnVzZXJpZCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["AddOrUpdate","setInterval","data","dataList","pageIndex","pageSize","totalPage","dataListLoading","showFlag","inter","layouts","flag","created","that","getDataList","contentPageStyleChange","components","methods","arr","push","join","_this","table","$storage","get","$http","url","$api","chatpage","method","params","page","limit","sort","then","_ref","code","list","total","sizeChangeHandle","val","currentChangeHandle","addOrUpdateHandler","row","_this2","$nextTick","$refs","addOrUpdate","init","userid"],"sources":["src/views/modules/chat/list.vue"],"sourcesContent":["<template>\r\n  <div class=\"main-content\" v-if=\"this.flag === 'users'\">\r\n    <!-- 列表页 -->\r\n    <div v-if=\"showFlag\">\r\n      <div class=\"table-content\">\r\n        <el-table class=\"tables\" size=\"medium\" show-header=\"true\"\r\n            :header-row-style=\"{color:'rgba(0, 0, 0, 1)'}\" :header-cell-style=\"{backgroundColor:'rgba(255, 219, 226, 0.459)'}\"\r\n            :border=\"true\"\r\n            fit=\"true\"\r\n            stripe=\"true\"\r\n            :style=\"{width: '100%',fontSize:'16px',color:'rgba(0, 0, 0, 1)'}\"\r\n            :data=\"dataList\"\r\n            v-loading=\"dataListLoading\">\r\n          <el-table-column prop=\"ask\" header-align=\"center\" align=\"center\" sortable label=\"新消息\"></el-table-column>\r\n          <el-table-column\r\n            prop=\"allnode\"\r\n            header-align=\"center\"\r\n            align=\"center\"\r\n            sortable\r\n            label=\"状态\"\r\n            width=\"150\"\r\n          >\r\n            <template slot-scope=\"scope\">\r\n              <el-tag v-if=\"scope.row.isreply==1\" type=\"success\">未回复</el-tag>\r\n              <el-tag v-if=\"scope.row.isreply==0\" type=\"info\">已回复</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column width=\"300\" align=\"center\" \r\n               header-align=\"center\"\r\n                label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button type=\"primary\" icon=\"el-icon-edit\" size=\"mini\" @click=\"addOrUpdateHandler(scope.row)\">回复</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n        <!-- 分页功能区 -->\r\n        <el-pagination\r\n          clsss=\"pages\"\r\n          :layout=\"layouts\"\r\n          @size-change=\"sizeChangeHandle\"\r\n          @current-change=\"currentChangeHandle\"\r\n          :current-page=\"pageIndex\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :page-size=\"10\"\r\n          :total=\"totalPage\"\r\n          :background=\"true\"\r\n          :style=\"{textAlign:'left'}\"\r\n        ></el-pagination>\r\n      </div>\r\n    </div>\r\n    <!-- 添加/修改页面  将父组件的search方法传递给子组件-->\r\n    <add-or-update v-else :parent=\"this\" ref=\"addOrUpdate\"></add-or-update>\r\n  </div>\r\n</template>\r\n<script>\r\nimport AddOrUpdate from \"./chat-add-or-update\";\r\nimport { setInterval } from 'timers';\r\nexport default {\r\n  data() {\r\n    return {\r\n      dataList: [],\r\n      pageIndex: 1,\r\n      pageSize: 10,\r\n      totalPage: 0,\r\n      dataListLoading: false,\r\n      showFlag: true,\r\n      inter: null,\r\n      layouts: '',\r\n\r\n      flag:'',\r\n    };\r\n  },\r\n  created() {\r\n    var that = this;\r\n    var inter = setInterval(function(){\r\n        that.getDataList();\r\n    },5000);\r\n    this.inter = inter;\r\n    this.contentPageStyleChange()\r\n  },\r\n  components: {\r\n    AddOrUpdate\r\n  },\r\n  methods: {\r\n    // 分页\r\n    contentPageStyleChange(){\r\n      let arr = []\r\n      arr.push('total')\r\n      arr.push('sizes')\r\n      arr.push('prev')\r\n      arr.push('pager')\r\n      arr.push('next')\r\n      arr.push('jumper')\r\n      this.layouts = arr.join()\r\n    },\r\n    getDataList() {\r\n      var table = this.$storage.get(\"sessionTable\");\r\n      this.flag = table;\r\n\r\n      this.dataListLoading = true;\r\n      this.$http({\r\n        url: this.$api.chatpage,\r\n        method: \"get\",\r\n        params: {\r\n          page: this.pageIndex,\r\n          limit: this.pageSize,\r\n          sort: 'id'\r\n        }\r\n      }).then(({ data }) => {\r\n        if (data && data.code === 0) {\r\n          this.dataList = data.data.list;\r\n          this.totalPage = data.data.total;\r\n        } else {\r\n          this.dataList = [];\r\n          this.totalPage = 0;\r\n        }\r\n        this.dataListLoading = false;\r\n      });\r\n    },\r\n    // 每页数\r\n    sizeChangeHandle(val) {\r\n      this.pageSize = val;\r\n      this.pageIndex = 1;\r\n      this.getDataList();\r\n    },\r\n    // 当前页\r\n    currentChangeHandle(val) {\r\n      this.pageIndex = val;\r\n      this.getDataList();\r\n    },\r\n    // 回复\r\n    addOrUpdateHandler(row) {\r\n      this.showFlag = false;\r\n      this.$nextTick(() => {\r\n        this.$refs.addOrUpdate.init(row.userid);\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\r\n.slt {\r\n    margin: 0 !important;\r\n    display: flex;\r\n  }\r\n\r\n  .ad {\r\n    margin: 0 !important;\r\n    display: flex;\r\n  }\r\n\r\n  .pages {\r\n    & /deep/ el-pagination__sizes{\r\n      & /deep/ el-input__inner {\r\n        height: 22px;\r\n        line-height: 22px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .el-button+.el-button {\r\n    margin:0;\r\n  } \r\n\r\n  .tables {\r\n\t& /deep/ .el-button--success {\r\n\t\theight: 40px;\r\n\t\tcolor: rgba(0, 0, 0, 1);\r\n\t\tfont-size: 14px;\r\n\t\tborder-width: 0 5px 5px;\r\n\t\tborder-style: solid;\r\n\t\tborder-color: rgba(109, 109, 148, 1);\r\n\t\tborder-radius: 0;\r\n\t\tbackground-color: rgba(255, 219, 226, 0.459);\r\n\t}\r\n\t\r\n\t& /deep/ .el-button--primary {\r\n\t\theight: 40px;\r\n\t\tcolor: rgba(0, 0, 0, 1);\r\n\t\tfont-size: 14px;\r\n\t\tborder-width: 0 5px 5px;\r\n\t\tborder-style: solid;\r\n\t\tborder-color: rgba(109, 109, 148, 1);\r\n\t\tborder-radius: 0;\r\n\t\tbackground-color: rgba(255, 219, 226, 0.459);\r\n\t}\r\n\t\r\n\t& /deep/ .el-button--danger {\r\n\t\theight: 40px;\r\n\t\tcolor: rgba(0, 0, 0, 1);\r\n\t\tfont-size: 14px;\r\n\t\tborder-width: 0 5px 5px;\r\n\t\tborder-style: solid;\r\n\t\tborder-radius: 0;\r\n\t\tbackground-color: rgba(255, 219, 226, 0.459);\r\n\t}\r\n\r\n    & /deep/ .el-button {\r\n      margin: 4px;\r\n    }\r\n  }\r\n\t.form-content {\r\n\t\tbackground: transparent;\r\n\t}\r\n\t.table-content {\r\n    background: transparent;\r\n\t}\r\n\t\r\n\t.tables /deep/ .el-table__body tr {\r\n\t\t\t\tbackground-color: rgba(255, 255, 255, 0.459) !important;\r\n\t\t\t\tcolor: rgba(0, 0, 0, 1) !important;\r\n\t }\r\n\t.tables /deep/ .el-table__body tr.el-table__row--striped td {\r\n\t    background: transparent;\r\n\t}\r\n\t.tables /deep/ .el-table__body tr.el-table__row--striped {\r\n\t\tbackground-color: rgba(255, 219, 226, 0.459) !important;\r\n\t\tcolor: rgba(0, 0, 0, 1) !important;\r\n\t}\r\n\t\r\n\t .tables /deep/ .el-table__body tr:hover>td {\r\n\t   \t   background-color: #f29d9d !important;\r\n\t   \t   \t   color: #333 !important;\r\n\t   \t }\r\n</style>\r\n"],"mappings":";;AAuDA,OAAAA,WAAA;AACA,SAAAC,WAAA;AACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,SAAA;MACAC,QAAA;MACAC,SAAA;MACAC,eAAA;MACAC,QAAA;MACAC,KAAA;MACAC,OAAA;MAEAC,IAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,IAAAC,IAAA;IACA,IAAAJ,KAAA,GAAAR,WAAA;MACAY,IAAA,CAAAC,WAAA;IACA;IACA,KAAAL,KAAA,GAAAA,KAAA;IACA,KAAAM,sBAAA;EACA;EACAC,UAAA;IACAhB,WAAA,EAAAA;EACA;EACAiB,OAAA;IACA;IACAF,sBAAA,WAAAA,uBAAA;MACA,IAAAG,GAAA;MACAA,GAAA,CAAAC,IAAA;MACAD,GAAA,CAAAC,IAAA;MACAD,GAAA,CAAAC,IAAA;MACAD,GAAA,CAAAC,IAAA;MACAD,GAAA,CAAAC,IAAA;MACAD,GAAA,CAAAC,IAAA;MACA,KAAAT,OAAA,GAAAQ,GAAA,CAAAE,IAAA;IACA;IACAN,WAAA,WAAAA,YAAA;MAAA,IAAAO,KAAA;MACA,IAAAC,KAAA,QAAAC,QAAA,CAAAC,GAAA;MACA,KAAAb,IAAA,GAAAW,KAAA;MAEA,KAAAf,eAAA;MACA,KAAAkB,KAAA;QACAC,GAAA,OAAAC,IAAA,CAAAC,QAAA;QACAC,MAAA;QACAC,MAAA;UACAC,IAAA,OAAA3B,SAAA;UACA4B,KAAA,OAAA3B,QAAA;UACA4B,IAAA;QACA;MACA,GAAAC,IAAA,WAAAC,IAAA;QAAA,IAAAjC,IAAA,GAAAiC,IAAA,CAAAjC,IAAA;QACA,IAAAA,IAAA,IAAAA,IAAA,CAAAkC,IAAA;UACAf,KAAA,CAAAlB,QAAA,GAAAD,IAAA,CAAAA,IAAA,CAAAmC,IAAA;UACAhB,KAAA,CAAAf,SAAA,GAAAJ,IAAA,CAAAA,IAAA,CAAAoC,KAAA;QACA;UACAjB,KAAA,CAAAlB,QAAA;UACAkB,KAAA,CAAAf,SAAA;QACA;QACAe,KAAA,CAAAd,eAAA;MACA;IACA;IACA;IACAgC,gBAAA,WAAAA,iBAAAC,GAAA;MACA,KAAAnC,QAAA,GAAAmC,GAAA;MACA,KAAApC,SAAA;MACA,KAAAU,WAAA;IACA;IACA;IACA2B,mBAAA,WAAAA,oBAAAD,GAAA;MACA,KAAApC,SAAA,GAAAoC,GAAA;MACA,KAAA1B,WAAA;IACA;IACA;IACA4B,kBAAA,WAAAA,mBAAAC,GAAA;MAAA,IAAAC,MAAA;MACA,KAAApC,QAAA;MACA,KAAAqC,SAAA;QACAD,MAAA,CAAAE,KAAA,CAAAC,WAAA,CAAAC,IAAA,CAAAL,GAAA,CAAAM,MAAA;MACA;IACA;EACA;AACA"}]}